<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Ecological Data Literacy</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="A textbook for the use of R in environmental statistics.">
  <meta name="generator" content="bookdown 0.3 and GitBook 2.6.7">

  <meta property="og:title" content="Ecological Data Literacy" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A textbook for the use of R in environmental statistics." />
  <meta name="github-repo" content="dyerlab/applied_environmental_statisics" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Ecological Data Literacy" />
  
  <meta name="twitter:description" content="A textbook for the use of R in environmental statistics." />
  

<meta name="author" content="Rodney J. Dyer">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="the-r-ecosystem.html">
<link rel="next" href="data-containers.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="media/style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Frontmatter</a></li>
<li class="chapter" data-level="" data-path="data-literacy.html"><a href="data-literacy.html"><i class="fa fa-check"></i>Data Literacy</a></li>
<li class="part"><span><b>I Foundations</b></span></li>
<li class="chapter" data-level="1" data-path="placeholder.html"><a href="placeholder.html"><i class="fa fa-check"></i><b>1</b> Placeholder</a></li>
<li class="chapter" data-level="2" data-path="the-r-ecosystem.html"><a href="the-r-ecosystem.html"><i class="fa fa-check"></i><b>2</b> The R Ecosystem</a></li>
<li class="chapter" data-level="3" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>3</b> Data Types</a><ul>
<li class="chapter" data-level="3.1" data-path="data-types.html"><a href="data-types.html#numeric-data-types"><i class="fa fa-check"></i><b>3.1</b> Numeric Data Types</a></li>
<li class="chapter" data-level="3.2" data-path="data-types.html"><a href="data-types.html#distributions"><i class="fa fa-check"></i><b>3.2</b> Distributions</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-types.html"><a href="data-types.html#coercion-to-numeric"><i class="fa fa-check"></i><b>3.2.1</b> Coercion to Numeric</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-types.html"><a href="data-types.html#characters"><i class="fa fa-check"></i><b>3.3</b> Characters</a><ul>
<li class="chapter" data-level="3.3.1" data-path="data-types.html"><a href="data-types.html#concatenation-of-characters"><i class="fa fa-check"></i><b>3.3.1</b> Concatenation of Characters</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-types.html"><a href="data-types.html#coercion-to-characters"><i class="fa fa-check"></i><b>3.3.2</b> Coercion to Characters</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-types.html"><a href="data-types.html#factors"><i class="fa fa-check"></i><b>3.4</b> Factors</a><ul>
<li class="chapter" data-level="3.4.1" data-path="data-types.html"><a href="data-types.html#missing-levels-in-factors"><i class="fa fa-check"></i><b>3.4.1</b> Missing Levels in Factors</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="data-types.html"><a href="data-types.html#logical-types"><i class="fa fa-check"></i><b>3.5</b> Logical Types</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-containers.html"><a href="data-containers.html"><i class="fa fa-check"></i><b>4</b> Data Containers</a></li>
<li class="chapter" data-level="5" data-path="manipulating-data.html"><a href="manipulating-data.html"><i class="fa fa-check"></i><b>5</b> Manipulating Data</a></li>
<li class="chapter" data-level="6" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>6</b> Programming</a></li>
<li class="chapter" data-level="7" data-path="markdown.html"><a href="markdown.html"><i class="fa fa-check"></i><b>7</b> Markdown</a></li>
<li class="part"><span><b>II Data</b></span></li>
<li class="chapter" data-level="8" data-path="manipulating-data-1.html"><a href="manipulating-data-1.html"><i class="fa fa-check"></i><b>8</b> Manipulating Data</a></li>
<li class="chapter" data-level="9" data-path="graphical-display.html"><a href="graphical-display.html"><i class="fa fa-check"></i><b>9</b> Graphical Display</a></li>
<li class="chapter" data-level="10" data-path="ggplot.html"><a href="ggplot.html"><i class="fa fa-check"></i><b>10</b> GGPlot</a></li>
<li class="chapter" data-level="11" data-path="spatial-data.html"><a href="spatial-data.html"><i class="fa fa-check"></i><b>11</b> Spatial Data</a></li>
<li class="part"><span><b>III Statistical Inferences</b></span></li>
<li class="chapter" data-level="12" data-path="summary-statistics.html"><a href="summary-statistics.html"><i class="fa fa-check"></i><b>12</b> Summary Statistics</a></li>
<li class="chapter" data-level="13" data-path="correlation.html"><a href="correlation.html"><i class="fa fa-check"></i><b>13</b> Correlation</a></li>
<li class="chapter" data-level="14" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>14</b> Linear Regression</a></li>
<li class="chapter" data-level="15" data-path="analysis-of-variance.html"><a href="analysis-of-variance.html"><i class="fa fa-check"></i><b>15</b> Analysis of Variance</a></li>
<li class="divider"></li>
<li><a href="http://dyerlab.org" target="blank">the Dyer Laboratory</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Ecological Data Literacy</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-types" class="section level1">
<h1><span class="header-section-number">3</span> Data Types</h1>
<blockquote>
<p>The data we work with comes in many forms—integers, stratum, categories, genotypes, etc.—all of which we need to be able to work with in our analyses. In this chapter, the basic data types we will commonly use in population genetic analyses. This section covers some of the basic types of data we will use in R. These include numbers, character, factors, and logical data types. We will also introduce the locus object from the gstudio library and see how it is just another data type that we can manipulate in R.</p>
</blockquote>
<p>The very first hurdle you need to get over is the oddness in the way in which R assigns values to variables.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">variable &lt;-<span class="st"> </span>value</code></pre></div>
<p>Yes that is a less-than and dash character. This is the assignment operator that historically has been used and it is the one that I will stick with. In some cases you can use the ‘=’ to assign variables instead but then it takes away the R-ness of R itself. For decision making, the equality operator (e.g., is this equal to that) is the double equals sign ‘==’. We will get into that below where we talk about logical types and later in decision making.</p>
<p>If you are unaware of what type a particular variable may be, you can always use the <code>type()</code> function and R will tell you.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>( variable )</code></pre></div>
<p>R also has a pretty good help system built into itself. You can get help for any function by typing a question mark in front of the function name. This is a particularly awesome features because at the end of the help file, there is often examples of its usage, which are priceless. Here is the documentation for the ‘help’ function as given by:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?help</code></pre></div>
<p>There are also package vignettes available (for most packages you download) that provide additional information on the routines, data sets, and other items included in these packages. You can get a list of vignettes currently installed on your machine by:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">vignette</span>()</code></pre></div>
<p>and vignettes for a particular package by passing the package name as an argument to the function itself.</p>
<div id="numeric-data-types" class="section level2">
<h2><span class="header-section-number">3.1</span> Numeric Data Types</h2>
<p>The quantitative measurements we make are often numeric, in that they can be represented as as a number with a decimal component (think weight, height, latitude, soil moisture, ear wax viscosity, etc.). The most basic type of data in R, is the numeric type and represents both integers and floating point numbers (n.b., there is a strict integer data type but it is often only needed when interfacing with other C libraries and can for what we are doing be disregarded).</p>
<p>Assigning a value to a variable is easy</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">3</span>
x</code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>By default, R automatically outputs whole numbers numbers within decimal values appropriately.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="dv">22</span>/<span class="dv">7</span>
y</code></pre></div>
<pre><code>## [1] 3.142857</code></pre>
<p>If there is a mix of whole numbers and numbers with decimals together in a container such as</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(x,y)</code></pre></div>
<pre><code>## [1] 3.000000 3.142857</code></pre>
<p>then both are shown with decimals. The <code>c()</code> part here is a function that combines several data objects together into a vector and is very useful. In fact, the use of vectors are are central to working in R and functions almost all the functions we use on individual variables can also be applied to vectors.</p>
<p>A word of caution should be made about numeric data types on any computer. Consider the following example.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span>.<span class="dv">3</span> /<span class="st"> </span><span class="dv">3</span>
x</code></pre></div>
<pre><code>## [1] 0.1</code></pre>
<p>which is exactly what we’d expect. However, the way in which computers store decimal numbers plays off our notion of significant digits pretty well. Look what happens when I print out x but carry out the number of decimal places.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(x, <span class="dt">digits=</span><span class="dv">20</span>)</code></pre></div>
<pre><code>## [1] 0.099999999999999991673</code></pre>
<p>Not quite 0.1 is it? Not that far away from it but not exact. That is a general problem, not one that R has any more claim to than any other language and/or implementation. Does this matter much, perhaps not in the realm of the kinds of things we do in ecology and evolutionary studies but it is important that you understand some of the limitations of the systems we are working in.</p>
</div>
<div id="distributions" class="section level2">
<h2><span class="header-section-number">3.2</span> Distributions</h2>
<p>A lot of the inferences we can glean about our data are based upon distributional assumptions–though we will examine some instances where they are not. R has a wealth of built-in functions specifying different distributions. In general, for each distribution, we have a function that allows us to generate random draws from that distribution as well as to inquire as to the probability (either cumulative or identity) of a particular value.</p>
<p>You can make random sets of numeric data by using using functions describing various distributions. For example, some random numbers from the normal distribution are:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rnorm</span>(<span class="dv">10</span>)</code></pre></div>
<pre><code>##  [1] -1.5116787 -0.7122693  0.7683401 -0.7607679  1.0465948 -1.7427211
##  [7]  1.2267826  0.1366012  0.5028216 -0.1270646</code></pre>
<p>The normal distribution has a probability density function of:</p>
<p><span class="math display">\[
\begin{equation}
P(x) = \frac{1}{\sigma\sqrt{2\pi}}e^{\frac{-(x-\mu)^2}{2\sigma^2}}
\end{equation}
\]</span> where the parameters <span class="math inline">\(\mu\)</span> and <span class="math inline">\(\sigma\)</span> are the mean and standard deviation (or variance if you consider <span class="math inline">\(\sigma^2\)</span>). The normal distribution is a foundation in a wide range of statistical approaches. In many cases, a collection of data, if we subtract the mean and divide it by the standard deviation, represents (at least to a close approximation) the Normal distribution (which is why it is so useful). We know quite a bit about this distribution such as:</p>
<ul>
<li>Within <span class="math inline">\(\mu \pm \sigma\)</span> contains ~66% of the observations, wheras,</li>
<li>Within <span class="math inline">\(\mu \pm 2\sigma\)</span> has 95%, and</li>
<li>Within <span class="math inline">\(\mu \pm 3\sigma\)</span> has 97.5% of all the data.</li>
</ul>
<p>This is some pretty exciting and useful information, amiright?</p>
<p>By default, the <code>rnorm()</code> function uses a mean of zero and a standard deviation of one. If you wish, you can specify alternatives for this as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rnorm</span>(<span class="dv">10</span>,<span class="dt">mean=</span><span class="dv">42</span>,<span class="dt">sd=</span><span class="dv">12</span>)</code></pre></div>
<pre><code>##  [1] 12.64457 54.76626 43.05366 54.56237 40.76978 54.15220 27.10362
##  [8] 59.24212 16.14606 50.13640</code></pre>
<p>Here is an interactive widget to play around with the normal distribution to get a feel for the shape of data as defined by measures of the center (mean) and distribution (the standard deviation). Also, note the extent to which the number of samples drawn from this distribution determine our ability to sucessfully describe it. This is <em>the key</em> point to statistical inferences. If we had an infinite number of data points, we would not need statistics. It is only because we are taking a small set of observations and trying to derive biologically relevant inferences from them that we need to use statistical approaches.</p>
<iframe src="http://shiny.envs.vcu.edu/apps/env_stats/data_normal_distribution/?showcase=0" width="720" height="900">
</iframe>
<p>Here is another distribution, the Poisson Distribution<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>. This distribution is defined as:</p>
<p><span class="math display">\[
\begin{equation}
P_\lambda(k) = \frac{\lambda^k e^{-\lambda}}{n!}
\end{equation}
\]</span></p>
<p>and is parameerized by <span class="math inline">\(\lambda\)</span> is the mean of the distribution and <span class="math inline">\(k\)</span> is the number of events.</p>
<p>A poisson distribution with mean 2:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rpois</span>(<span class="dv">10</span>,<span class="dt">lambda =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code>##  [1] 2 1 4 1 4 4 2 1 2 2</code></pre>
<p>and the <span class="math inline">\(\chi^2\)</span> distribution with 1 degree of freedom:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rchisq</span>(<span class="dv">10</span>, <span class="dt">df=</span><span class="dv">1</span>)</code></pre></div>
<pre><code>##  [1] 0.5249233 0.1733646 0.3853613 0.8113653 0.8476138 1.5320079 0.6731613
##  [8] 0.3023838 0.8451502 1.0380861</code></pre>
<p>There are several more distributions that if you need to access random numbers, quantiles, probability densities, and cumulative density values are available.</p>
<div id="coercion-to-numeric" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Coercion to Numeric</h3>
<p>All data types have the potential ability to take another variable and coerce it into their type. Some combinations make sense, and some do not. For example, if you load in a CSV data file using read_csv(), and at some point a stray non-numeric character was inserted into one of the cells on your spreadsheet, R will interpret the entire column as a character type rather than as a numeric type. This can be a very frustrating thing, spreadsheets should generally be considered evil as they do all kinds of stuff behind the scenes and make your life less awesome.</p>
<p>Here is an example of coercion of some data that is initially defined as a set of characters</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;42&quot;</span>,<span class="st">&quot;99&quot;</span>)
x</code></pre></div>
<pre><code>## [1] &quot;42&quot; &quot;99&quot;</code></pre>
<p>and is coerced into a numeric type using the as.numeric() function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="kw">as.numeric</span>( x )
y</code></pre></div>
<pre><code>## [1] 42 99</code></pre>
<p>It is a built-in feature of the data types in R that they all have (or should have if someone is producing a new data type and is being courteous to their users) an <code>as.X()</code> function. This is where the data type decides if the values asked to be coerced are reasonable or if you need to be reminded that what you are asking is not possible. Here is an example where I try to coerce a non-numeric variable into a number.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> &quot;The night is dark and full of terrors...&quot;</span>
<span class="kw">as.numeric</span>( x )</code></pre></div>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<pre><code>## [1] NA</code></pre>
<p>By default, the result should be NA (missing data/non-applicable) if you ask for things that are not possible.</p>
</div>
</div>
<div id="characters" class="section level2">
<h2><span class="header-section-number">3.3</span> Characters</h2>
<p>A collection of letters, number, and or punctuation is represented as a character data type. These are enclosed in either single or double quotes and are considered a single entity. For example, my name can be represented as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prof &lt;-<span class="st"> &quot;Rodney J. Dyer&quot;</span>
prof</code></pre></div>
<pre><code>## [1] &quot;Rodney J. Dyer&quot;</code></pre>
<p>In R, character variables are considered to be a single entity, that is the entire prof variable is a single unit, not a collection of characters. This is in part due to the way in which vectors of variables are constructed in the language. For example, if you are looking at the length of the variable I assigned my name to you see</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(prof)</code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>which shows that there is only one ‘character’ variable. If, as is often the case, you are interested in knowing how many characters are in the variable prof, then you use the</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nchar</span>(prof)</code></pre></div>
<pre><code>## [1] 14</code></pre>
<p>function instead. This returns the number of characters (even the non-printing ones like tabs and spaces.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nchar</span>(<span class="st">&quot; </span><span class="ch">\t</span><span class="st"> &quot;</span>)</code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>As all other data types, you can define a vector of character values using the <code>c()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> &quot;I am&quot;</span>
y &lt;-<span class="st"> &quot;not&quot;</span>
z &lt;-<span class="st"> &#39;a looser&#39;</span>
terms &lt;-<span class="st"> </span><span class="kw">c</span>(x,y,z)
terms</code></pre></div>
<pre><code>## [1] &quot;I am&quot;     &quot;not&quot;      &quot;a looser&quot;</code></pre>
<p>And looking at the <code>length()</code> and <code>nchar()</code> of this you can see how these operations differ.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(terms)</code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nchar</span>(terms)</code></pre></div>
<pre><code>## [1] 4 3 8</code></pre>
<div id="concatenation-of-characters" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Concatenation of Characters</h3>
<p>Another common use of characters is concatenating them into single sequences. Here we use the function <code>paste()</code> and can set the separators (or characters that are inserted between entities when we collapse vectors). Here is an example, entirely fictional and only provided for instructional purposes only.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(terms, <span class="dt">collapse=</span><span class="st">&quot; &quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;I am not a looser&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(x,z)</code></pre></div>
<pre><code>## [1] &quot;I am a looser&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(x,z,<span class="dt">sep=</span><span class="st">&quot; not &quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;I am not a looser&quot;</code></pre>
</div>
<div id="coercion-to-characters" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Coercion to Characters</h3>
<p>A character data type is often the most basal type of data you can work with. For example, consider the case where you have named sample locations. These can be kept as a character data type or as a factor (see below). There are benefits and drawbacks to each representation of the same data (see below). By default (as of the version of R I am currently using when writing this book), if you use a function like read_table() to load in an external file, columns of character data will be treated as factors. This can be good behavior if all you are doing is loading in data and running an analysis, or it can be a total pain in the backside if you are doing more manipulative analyses.</p>
<p>Here is an example of coercing a numeric type into a character type using the <code>as.character()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">42</span>
x</code></pre></div>
<pre><code>## [1] 42</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="kw">as.character</span>(x)
y</code></pre></div>
<pre><code>## [1] &quot;42&quot;</code></pre>
</div>
</div>
<div id="factors" class="section level2">
<h2><span class="header-section-number">3.4</span> Factors</h2>
<p>A factor is a categorical data type. If you are coming from SAS, these are class variables. If you are not, then perhaps you can think of them as mutually exclusive classifications. For example, an sample may be assigned to one particular locale, one particular region, and one particular species. Across all the data you may have several species, regions, and locales. These are finite, and defined, sets of categories. One of the more common headaches encountered by people new to R is working with factor types and trying to add categories that are not already defined.</p>
<p>Since factors are categorical, it is in your best interest to make sure you label them in as descriptive as a fashion as possible. You are not saving space or cutting down on computational time to take shortcuts and label the locale for Rancho Santa Maria as RSN or pop3d or 5. Our computers are fast and large enough, and our programmers are cleaver enough, to not have to rename our populations in numeric format to make them work (hello STRUCTURE I’m calling you out here). The only thing you have to loose by adopting a reasonable naming scheme is confusion in your output.</p>
<p>To define a factor type, you use the function <code>factor()</code> and pass it a vector of values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">region &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;North&quot;</span>,<span class="st">&quot;North&quot;</span>,<span class="st">&quot;South&quot;</span>,<span class="st">&quot;East&quot;</span>,<span class="st">&quot;East&quot;</span>,<span class="st">&quot;South&quot;</span>,<span class="st">&quot;West&quot;</span>,<span class="st">&quot;West&quot;</span>,<span class="st">&quot;West&quot;</span>)
region &lt;-<span class="st"> </span><span class="kw">factor</span>( region )
region</code></pre></div>
<pre><code>## [1] North North South East  East  South West  West  West 
## Levels: East North South West</code></pre>
<p>When you print out the values, it shows you all the levels present for the factor. If you have levels that are not present in your data set, when you define it, you can tell R to consider additional levels of this factor by passing the optional levels= argument as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">region &lt;-<span class="st"> </span><span class="kw">factor</span>( region, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;North&quot;</span>,<span class="st">&quot;South&quot;</span>,<span class="st">&quot;East&quot;</span>,<span class="st">&quot;West&quot;</span>,<span class="st">&quot;Central&quot;</span>))
region</code></pre></div>
<pre><code>## [1] North North South East  East  South West  West  West 
## Levels: North South East West Central</code></pre>
<p>If you try to add a data point to a factor list that does not have the factor that you are adding, it will give you an error (or ‘barf’ as I like to say).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">region[<span class="dv">1</span>] &lt;-<span class="st"> &quot;Bob&quot;</span></code></pre></div>
<pre><code>## Warning in `[&lt;-.factor`(`*tmp*`, 1, value = &quot;Bob&quot;): invalid factor level,
## NA generated</code></pre>
<p>Now, I have to admit that the Error message in its entirety, with its <code>&quot;[&lt;-.factor(*tmp*, 1, value = &quot;Bob&quot;)&quot;</code> part is, perhaps, not the most informative. Agreed. However, the “invalid factor level” does tell you something useful. Unfortunately, the programmers that put in the error handling system in R did not quite adhere to the spirit of the “fail loudly” mantra. It is something you will have to get good at. Google is your friend, and if you post a questions to (<a href="http://stackoverflow.org" class="uri">http://stackoverflow.org</a>) or the R user list without doing serious homework, put on your asbestos shorts!</p>
<p>Unfortunately, the error above changed the first element of the region vector to NA (missing data). I’ll turn it back before we move too much further.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">region[<span class="dv">1</span>] &lt;-<span class="st"> &quot;North&quot;</span></code></pre></div>
<p>Factors in R can be either unordered (as say locale may be since locale A is not <code>&gt;</code>, <code>=</code>, or <code>&lt;</code> locale B) or they may be ordered categories as in <code>Small &lt; Medium &lt; Large &lt; X-Large</code>. When you create the factor, you need to indicate if it is an ordered type (by default it is not). If the factors are ordered in some way, you can also create an ordination on the data. If you do not pass a levels= option to the <code>factors()</code> function, it will take the order in which they occur in data you pass to it. If you want to specify an order for the factors specifically, pass the optional <code>levels=</code> and they will be ordinated in the order given there.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">region &lt;-<span class="st"> </span><span class="kw">factor</span>( region, <span class="dt">ordered=</span><span class="ot">TRUE</span>, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;West&quot;</span>, <span class="st">&quot;North&quot;</span>, <span class="st">&quot;South&quot;</span>, <span class="st">&quot;East&quot;</span>) )
region</code></pre></div>
<pre><code>## [1] North North South East  East  South West  West  West 
## Levels: West &lt; North &lt; South &lt; East</code></pre>
<div id="missing-levels-in-factors" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Missing Levels in Factors</h3>
<p>There are times when you have a subset of data that do not have all the potential categories.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">subregion &lt;-<span class="st"> </span>region[ <span class="dv">3</span>:<span class="dv">9</span> ]
subregion</code></pre></div>
<pre><code>## [1] South East  East  South West  West  West 
## Levels: West &lt; North &lt; South &lt; East</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>( subregion )</code></pre></div>
<pre><code>## subregion
##  West North South  East 
##     3     0     2     2</code></pre>
</div>
</div>
<div id="logical-types" class="section level2">
<h2><span class="header-section-number">3.5</span> Logical Types</h2>
<p>A logical type is either TRUE or FALSE, there is no in-between. It is common to use these types in making decisions (see if-else decisions) to check a specific condition being satisfied. To define logical variables you can either use the TRUE or FALSE directly</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">canThrow &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>)
canThrow</code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE FALSE FALSE</code></pre>
<p>or can implement some logical condition</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">stable &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="st">&quot;RGIII&quot;</span> ==<span class="st"> </span><span class="dv">0</span>, <span class="kw">nchar</span>(<span class="st">&quot;Marshawn&quot;</span>) ==<span class="st"> </span><span class="dv">8</span>)
stable</code></pre></div>
<pre><code>## [1] FALSE  TRUE</code></pre>
<p>on the variables. Notice here how each of the items is actually evaluated as to determine the truth of each expression. In the first case, the character is not equal to zero and in the second, the number of characters (what <code>nchar()</code> does) is indeed equal to 8 for the character string “Marshawn”.</p>
<p>It is common to use logical types to serve as indices for vectors. Say for example, you have a vector of data that you want to select some subset from.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">20</span>)
data</code></pre></div>
<pre><code>##  [1]  2.16887157 -0.31736008 -0.95824070  0.12033515 -0.56684729
##  [6] -1.32115170  0.58927843  1.28677274 -0.78388557  0.26535726
## [11] -1.02692050  0.47998349 -1.04951284  0.05726005  0.90010875
## [16] -1.13512998 -0.69424111 -2.36714036 -0.38481955  1.81444872</code></pre>
<p>Perhaps you are on interested in the non-negative values</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data[ data &gt;<span class="st"> </span><span class="dv">0</span> ]</code></pre></div>
<pre><code>## [1] 2.16887157 0.12033515 0.58927843 1.28677274 0.26535726 0.47998349
## [7] 0.05726005 0.90010875 1.81444872</code></pre>
<p>If you look at the condition being passed to as the index</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data &gt;<span class="st"> </span><span class="dv">0</span></code></pre></div>
<pre><code>##  [1]  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE FALSE  TRUE FALSE
## [12]  TRUE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE  TRUE</code></pre>
<p>you see that individually, each value in the data vector is being evaluated as a logical value, satisfying the condition that it is strictly greater than zero. When you pass that as indices to a vector it only shows the indices that are <code>TRUE</code>.</p>
<p>You can coerce a value into a logical if you understand the rules. Numeric types that equal 0 (zero) are <code>FALSE</code>, always. Any non-zero value is considered <code>TRUE</code>. Here I use the modulus operator, <code>%%</code>, which provides the remainder of a division.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span>:<span class="dv">20</span> %%<span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre><code>##  [1] 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0</code></pre>
<p>which used as indices give us</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data[ (<span class="dv">1</span>:<span class="dv">20</span> %%<span class="st"> </span><span class="dv">2</span>) &gt;<span class="st"> </span><span class="dv">0</span> ]</code></pre></div>
<pre><code>##  [1]  2.1688716 -0.9582407 -0.5668473  0.5892784 -0.7838856 -1.0269205
##  [7] -1.0495128  0.9001087 -0.6942411 -0.3848196</code></pre>
<p>You can get as complicated in the creation of indices as you like, even using logical operators such as OR and AND. I leave that as an example for you to play with.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Fishy non?<a href="data-types.html#fnref1">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-r-ecosystem.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-containers.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"],
"instapaper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
